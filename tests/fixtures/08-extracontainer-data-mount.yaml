---
# Sidecar / extraContainers regression test
# Ensures extra container can mount ClickHouse data volume when mounts.data=true
clickhouse:
  replicasCount: 1
  shardsCount: 1

  persistence:
    enabled: true
    size: 1Gi

  resources:
    requests:
      cpu: "100m"
      memory: "512Mi"
    limits:
      cpu: "500m"
      memory: "1Gi"

  extraContainers:
    - name: sidecar-data-mount
      image: busybox:1.36
      command:
        - sh
        - -c
        - "sleep 3600"
      env:
        - name: EXTRA_FOO
          value: "bar"
      ports:
        - name: http-metrics
          containerPort: 8080
      resources:
        requests:
          cpu: "10m"
          memory: "16Mi"
        limits:
          cpu: "20m"
          memory: "32Mi"
      mounts:
        data: true

keeper:
  enabled: false

operator:
  enabled: true
